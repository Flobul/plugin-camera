== Configuration del plugin

Después de instalar el plugin, simplemente activarlo es suficiente, sin embargo, hay algunos ajustes de configuración avanzada: 

image::../images/camera1.PNG[]

** directorio de registros *: indica la ruta de acceso donde Jeedom debe poner las imágenes que captan las cámaras (es recomendable no tocar)
* *Tamaño máximo del archivo de registro (MB)* : Indica el tamaño máximo permitido para la carpeta o las capturas registradas (es recomendable no tocar). Si se sobrepasa esta cuota, Jeedom elimina las capturas más antiguas

[IMPORTANTE]
Atención las capturas no son parte de la copia de seguridad

== Configuración de dispositivos

La configuración de las cámaras es accesible desde el menu plugin:

image::../images/camera2.PNG[]

Esta es la página del plugin cámara (aquí con 1 cámara instalada):

image::../images/camera3.PNG[]

[TIP]
Como en muchos apartados en Jeedom, llevar el ratón totalmente a la izquierda le permite acceder al menú de acceso rápido (desde sus perfiles se puede dejar siempre visible)

Tienes un botón de creación de dispositivos y sus cámaras actuales, con sus respectivas imágenes si están disponibles.

Haciendo clic en uno de los equipos de cámara, se obtiene:

image::../images/camera4.PNG[]

** Nombre del dispositivo cámara *: nombre de su dispositivo cámara
** Objeto padre *: indica el objeto padre al que pertenece el dispositivo
* *Activar* : permite activar su dispositivo
* *Visible* : lo hace visible en el Dashboard
* *IP* : IP local de la cámara
* *Puerto* : El puerto con el que conectar a la cámara
* *Protocolo* : el protocolo de comunicación de la camera (http o https)
* *Usuario* : nombre de usuario para conectar a la cámara (si es necesario)
* *Contraseña* : contraseña para conectar a la cámara (si es necesario) 
* *URL de captura* : URL del "snapshot" de la cámara. Cambia en función de las cámaras. Cuidado de no poner una url de fujo directo puede colgar Jeedom. Puede utilizar las etiquetas \#username# y \#password#, que será sustituido automáticamente por el nombre de usuario y la contraseña cuando se use este comando
** frecuencia de refresco *: Frecuencia de refresco de las capturas en el widget . Atención a menor refresco mayor carga de trabajo para Jeedom.
** Enviar correo *: permite especificar un comando de correo que se utilizará para enviar capturas (comando "Enviar una captura"), puedes especificar varias direcciones separadas por &.
* *Número de captura(s) *: establece el número de capturas a enviar (las capturas se toman cada segundo)
* *Modelo* : permite elegir el modelo de la cámara, Atención cambiar esto supone sobreescribir  los parametros de configuración actuales.

A continuación encontrará la lista de ordenes :

* ID de la orden (para uso con ordenes de tipo info, por ejemplo que la cámara devuelve la información de movimiento a Jeedom a través de la api, vea abajo)
Nombre de la orden, con la posibilidad de poner un icono en el lugar (para eliminar doble clic en el icono en cuestión)
* Tipo y subtipos de ordenes
* Solicitud para enviar a la cámara para hacer una acción (cambiar a modo night, ptz,...). Puede utilizar las etiquetas \#username# y \#password#, que será sustituido automáticamente por el nombre de usuario y la contraseña cuando se use este comando
* Orden Stop : para cámaras PTZ a veces  existe un comando de Stop, aquí especificado
* Ver : Permite decidir si desea o no mostrar la orden en el dashboard
* Configuración avanzada (pequeñas ruedas dentadas): muestra la configuración avanzada de la orden (método de historico, widget...)
* Probar : le permite probar la orden
* Eliminar (signo - ) : permite borrar la orden


[IMPORTANTE]
El registro no tiene límite de tiempo y puede ocupar un montón de espacio, así que cuidado, si llena tu disco, jeedom podría dejar de verlos  a todos.


== El widget

Así es como se ve el widget de cámara: 

image::../images/camera5.PNG[]

En la imagen, captura de la cámara, ordenes definidas en la configuración, la orden para tomar una captura, la orden para iniciar la toma de captura múltiple y la orden para ver las capturas.

[TIP]
En el dashboard es posible redimensionar el widget para adaptarlo a tus necesidades

Click en la imagen para verla más grande :  

image::../images/camera6.PNG[]

Un clique sur la derniere commande pour parcourir les captures vous affichera celle-ci : 

image::../images/camera7.PNG[]

[IMPORTANTE]
Ce sont des images ici absolument pas des videos, les images sont prise soit une fois en mode capture simple, soit toute les secondes en mode enregistrement.

Vous retrouvez ici toute les captures organisées par jour puis par date, vous pouvez pour chacun d'elle : 

* la voir en plus en grand en cliquant sur l'image
* la télécharger
* la supprimer

En mobile le widget est un peu different : 

image::../images/camera12.PNG[]

Si vous cliquez sur l'image de la camera vous obtenez celel-ci en plus grande avec les commandes possible : 

image::../images/camera13.PNG[]

== Les panels

Le plugin caméra mets aussi à disposition un panel qui vous permet de voir d'un seul coup toute vos caméras, il est accessible par Acceuil -> Caméra : 

image::../images/camera8.PNG[]

Voila le résultat : 

image::../images/camera9.PNG[]

Il est bien sur aussi disponible en mobile par Plugin -> Caméra : 

image::../images/camera10.PNG[]

Une fois dessus vous obtenez une vue global de toutes vos caméras :

image::../images/camera11.PNG[]

== Enregistrement et envoi de capture

Cette commande un peu spécifique elle permet suite à la prise de capture de faire l'envoi de celle-ci (compatible avec le plugin slack, mail et transfert)

La configuration est assez simple vous appellez l'action d'envoi de capture, dans la partie titre vous passez les options (par défaut il faut juste mettre le nombre de capture voulu mais vous pouvez aller plus loin avec les options avancées) et dans la partie message la commande du plugin (actuellement slack, mail ou transfert) qui fait l'envoi des captures. Vous pouvez en mettre plusieurs séparé par des &&.

=== Options avancés de captures

* nbSnap : nombre de capture, si non précisé alors les captures sont faite jusqu'a une demande d'arret d'enregistrement ou d'arret de la caméra
* delay : délai entre 2 capture, si non précisé alors le délai est de 1s
* wait : délai d'attente avant de commencer les captures, si non précié alors aucun envoi n'est fait
* sendPacket : nombre de capture déclenchant l'envoi de paquet, si non précisé alors les captures seront envoyée qu'a la fin

Example : 

image::../images/camera15.PNG[]

Ici le plugin va attendre 5s avant de commencer l'enregistrement puis faire un envoi au nas (par le plugin transfert) toute les 10 captures jusqu'a ce qu'on lui dise d'arreter (stop enregistrement ou arret de la caméra)

== Envoi de la detection de mouvement à Jeedom

Si vous avez une caméra qui possède la détection de mouvement et que vous voulez transmettre celle-ci à Jeedom voila l'url à mettre sur votre caméra : 

----
http://#IP_JEEDOM#/core/api/jeeApi.php?apikey=#APIKEY#&type=camera&id=#ID#&value=#value#
----

Il faut bien entendu avant avoir creer une commande de type info sur votre caméra
== Configuration del plugin

Después de instalar el plugin, simplemente activarlo es suficiente, sin embargo, hay algunos ajustes de configuración avanzada: 

image::../images/camera1.PNG[]

** directorio de registros *: indica la ruta de acceso donde Jeedom debe poner las imágenes que captan las cámaras (es recomendable no tocar)
* *Tamaño máximo del archivo de registro (MB)* : Indica el tamaño máximo permitido para la carpeta o las capturas registradas (es recomendable no tocar). Si se sobrepasa esta cuota, Jeedom elimina las capturas más antiguas

[IMPORTANTE]
Atención las capturas no son parte de la copia de seguridad

== Configuración de dispositivos

La configuración de las cámaras es accesible desde el menu plugin:

image::../images/camera2.PNG[]

Esta es la página del plugin cámara (aquí con 1 cámara instalada):

image::../images/camera3.PNG[]

[TIP]
Como en muchos apartados en Jeedom, llevar el ratón totalmente a la izquierda le permite acceder al menú de acceso rápido (desde sus perfiles se puede dejar siempre visible)

Tienes un botón de creación de dispositivos y sus cámaras actuales, con sus respectivas imágenes si están disponibles.

Haciendo clic en uno de los equipos de cámara, se obtiene:

image::../images/camera4.PNG[]

** Nombre del dispositivo cámara *: nombre de su dispositivo cámara
** Objeto padre *: indica el objeto padre al que pertenece el dispositivo
* *Activar* : permite activar su dispositivo
* *Visible* : lo hace visible en el Dashboard
* *IP* : IP local de la cámara
* *Puerto* : El puerto con el que conectar a la cámara
* *Protocolo* : el protocolo de comunicación de la camera (http o https)
* *Usuario* : nombre de usuario para conectar a la cámara (si es necesario)
* *Contraseña* : contraseña para conectar a la cámara (si es necesario) 
* *URL de captura* : URL del "snapshot" de la cámara. Cambia en función de las cámaras. Cuidado de no poner una url de fujo directo puede colgar Jeedom. Puede utilizar las etiquetas \#username# y \#password#, que será sustituido automáticamente por el nombre de usuario y la contraseña cuando se use este comando
** frecuencia de refresco *: Frecuencia de refresco de las capturas en el widget . Atención a menor refresco mayor carga de trabajo para Jeedom.
** Enviar correo *: permite especificar un comando de correo que se utilizará para enviar capturas (comando "Enviar una captura"), puedes especificar varias direcciones separadas por &.
* *Número de captura(s) *: establece el número de capturas a enviar (las capturas se toman cada segundo)
* *Modelo* : permite elegir el modelo de la cámara, Atención cambiar esto supone sobreescribir  los parametros de configuración actuales.

A continuación encontrará la lista de ordenes :

* ID de la orden (para uso con ordenes de tipo info, por ejemplo que la cámara devuelve la información de movimiento a Jeedom a través de la api, vea abajo)
Nombre de la orden, con la posibilidad de poner un icono en el lugar (para eliminar doble clic en el icono en cuestión)
* Tipo y subtipos de ordenes
* Solicitud para enviar a la cámara para hacer una acción (cambiar a modo night, ptz,...). Puede utilizar las etiquetas \#username# y \#password#, que será sustituido automáticamente por el nombre de usuario y la contraseña cuando se use este comando
* Orden Stop : para cámaras PTZ a veces  existe un comando de Stop, aquí especificado
* Ver : Permite decidir si desea o no mostrar la orden en el dashboard
* Configuración avanzada (pequeñas ruedas dentadas): muestra la configuración avanzada de la orden (método de historico, widget...)
* Probar : le permite probar la orden
* Eliminar (signo - ) : permite borrar la orden


[IMPORTANTE]
El registro no tiene límite de tiempo y puede ocupar un montón de espacio, así que cuidado, si llena tu disco, jeedom podría dejar de verlos  a todos.


== El widget

Así es como se ve el widget de cámara: 

image::../images/camera5.PNG[]

En la imagen, captura de la cámara, ordenes definidas en la configuración, la orden para tomar una captura, la orden para iniciar la toma de captura múltiple y la orden para ver las capturas.

[TIP]
En el dashboard es posible redimensionar el widget para adaptarlo a tus necesidades

Click en la imagen para verla más grande :  

image::../images/camera6.PNG[]

Pulsando sobre el último comando se muestran las capturas de pantalla, así: 

image::../images/camera7.PNG[]

[IMPORTANTE]
Estas son imágenes, no vídeos, los imágenes son capturadas ya sea una vez en modo de captura individual o cada segundo en modo grabación.

Aquí encontraras todas las capturas organizadas por día y fecha, por cada una de ellas puedes : 

* Verla más grande pulsando sobre la imagen
* Descargarla
* Borrarla

El Widget móvil es un poco diferente: 

image::../images/camera12.PNG[]

Si pulsas sobre la imagen de la cámara, se abre una ventana mayor con los posibles comandos: 

image::../images/camera13.PNG[]

== El panel

El plugin dispone de un panel que permite ver todas sus cámaras en conjunto, es accesible a traves de la página de Inicio -> Cámara: 

image::../images/camera8.PNG[]

Aquí el resultado : 

image::../images/camera9.PNG[]

Por supuesto también está disponible desde el  móvil desde  Plugin -> Cámara: 

image::../images/camera10.PNG[]

Una vez dentro, obtendrá una visión global de todas sus cámaras:

image::../images/camera11.PNG[]

== Grabación y envío de captura

Este comando algo específico que permite después de la captura, enviarla (compatible con los plugin slack, mail y transfert)

La configuración es simple,  basta con llamar la acción de enviar captura, en el título puedes pasar más opciones (por defecto el número de captura, pero puedes ir más allá con las opciones avanzadas) y en el cuadro de mensaje, la orden del plugin (actualmente slack, mail o transfert) para realizar el envío de capturas. Puedes poner varias separados por &&

=== Opciones avanzadas de captura

* nbSnap: número de captura, si no se indica, las capturas se realizan a una petición para detener la grabación o detener la cámara
* retardo: tiempo entre 2 capturas, si no indica el período es de 1s
* wait : tiempo de espera antes de la captura, si no se indica entonces ningún envio se hará
* sendPacket: número de captura disparadas que serán enviadas, si no se indica entonces se enviarán las capturas al final.

Ejemplo 

image::../images/camera15.PNG[]

Aquí el plugin espera 5 s antes de empezar a grabar y luego hace un envío a un nas (el plugin transfert) todas las capturas, 10,  hasta que se interrumpa (parar grabación o cámara)

== Encio de la detección de movimiento a Jeedom

Si tienes una cámara que tiene detección de movimiento y quieres enviarlo a Jeedom esta es la url para poner en la cámara: 

----
http://#IP_JEEDOM#/core/api/jeeApi.php?apikey=#APIKEY#&type=camera&id=#ID#&value=#value#
----

Por supuesto antes se deben de crear un comando de tipo info en la cámara